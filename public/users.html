<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title data-i18n="users.title">Users</title>
	<link rel="stylesheet" href="/style.css" />
</head>
<body>
	<header class="topbar" id="navbar"></header>
	<main class="container" style="padding-top: var(--space-8); padding-bottom: var(--space-8);">
		<!-- Page Header -->
		<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-6); flex-wrap: wrap; gap: var(--space-4);">
			<div class="card" style="padding: var(--space-5) var(--space-6); background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(8px); border: none; box-shadow: var(--shadow-md); display: flex; align-items: center; gap: var(--space-3); flex-wrap: wrap;">
				<h2 style="margin: 0; color: var(--text-primary); font-weight: var(--font-weight-bold); font-size: var(--font-size-2xl);" data-i18n="users.title">Users</h2>
				<p class="text-secondary" style="margin: 0; color: var(--text-secondary); font-size: var(--font-size-base); font-weight: var(--font-weight-normal);" data-i18n="users.description">Manage users and their roles</p>
			</div>
			<div class="actions">
				<button id="addUserBtn" class="btn btn-primary">
					<svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
						<path d="M12 4v16m8-8H4"/>
					</svg>
					<span data-i18n="users.addUser">Add User</span>
				</button>
			</div>
		</div>

		<!-- Loader -->
		<div id="loader" class="loader-container">
			<div class="loader"></div>
			<p class="loader-text" data-i18n="users.loading">Loading users...</p>
		</div>

		<!-- Users Table -->
		<div class="table-wrapper" id="usersTable" style="display: none;">
			<table class="table">
				<thead>
					<tr>
						<th data-i18n="users.username">Username</th>
						<th data-i18n="users.role">Role</th>
						<th data-i18n="users.createdAt">Created At</th>
						<th data-i18n="table.actions">Actions</th>
					</tr>
				</thead>
				<tbody id="usersList"></tbody>
			</table>
		</div>

		<!-- Error message -->
		<p id="errorMessage" style="display:none; margin-top: var(--space-4); padding: var(--space-3); background: var(--color-danger-soft); color: var(--color-danger); border-radius: var(--radius-md); border: 1px solid var(--color-danger); font-size: var(--font-size-sm);"></p>
	</main>

	<!-- Role Change Modal -->
	<div id="roleModal" class="modal" style="display: none;">
		<div class="modal-content">
			<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-4);">
				<h3 data-i18n="users.changeRole">Change Role</h3>
				<button id="closeRoleModal" class="btn btn-secondary" style="padding: var(--space-1); min-width: auto;">
					<svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
						<path d="M6 18L18 6M6 6l12 12"/>
					</svg>
				</button>
			</div>
			<form id="roleForm">
				<input type="hidden" id="roleUserId" />
				<div>
					<label data-i18n="users.selectRole">Select Role</label>
					<select id="roleSelect" required style="width: 100%;">
						<option value="user" data-i18n="users.roleUser">User</option>
						<option value="admin" data-i18n="users.roleAdmin">Admin</option>
					</select>
				</div>
				<div class="actions" style="margin-top: var(--space-4);">
					<button type="submit" class="btn btn-primary">
						<span data-i18n="users.updateRole">Update Role</span>
					</button>
					<button type="button" id="cancelRoleModal" class="btn btn-secondary">
						<span data-i18n="users.cancel">Cancel</span>
					</button>
				</div>
			</form>
		</div>
	</div>

	<!-- Password Set Modal -->
	<div id="passwordModal" class="modal" style="display: none;">
		<div class="modal-content">
			<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-4);">
				<h3 data-i18n="users.setPassword">Set Password</h3>
				<button id="closePasswordModal" class="btn btn-secondary" style="padding: var(--space-1); min-width: auto;">
					<svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
						<path d="M6 18L18 6M6 6l12 12"/>
					</svg>
				</button>
			</div>
			<form id="passwordForm">
				<input type="hidden" id="passwordUserId" />
				<div>
					<label data-i18n="users.newPassword">New Password</label>
					<input type="password" id="newPasswordInput" required autocomplete="new-password" data-placeholder="users.placeholderNewPassword" />
				</div>
				<div style="margin-top: var(--space-4);">
					<label data-i18n="users.confirmPassword">Confirm Password</label>
					<input type="password" id="confirmPasswordInput" required autocomplete="new-password" data-placeholder="users.placeholderConfirmPassword" />
				</div>
				<p id="passwordError" style="display:none; margin-top: var(--space-4); padding: var(--space-3); background: var(--color-danger-soft); color: var(--color-danger); border-radius: var(--radius-md); border: 1px solid var(--color-danger); font-size: var(--font-size-sm);"></p>
				<p id="passwordSuccess" style="display:none; margin-top: var(--space-4); padding: var(--space-3); background: var(--color-success-soft); color: var(--color-success); border-radius: var(--radius-md); border: 1px solid var(--color-success); font-size: var(--font-size-sm);"></p>
				<div class="actions" style="margin-top: var(--space-4);">
					<button type="submit" class="btn btn-primary">
						<span data-i18n="users.setPassword">Set Password</span>
					</button>
					<button type="button" id="cancelPasswordModal" class="btn btn-secondary">
						<span data-i18n="users.cancel">Cancel</span>
					</button>
				</div>
			</form>
		</div>
	</div>

	<!-- Add User Modal -->
	<div id="addUserModal" class="modal" style="display: none;">
		<div class="modal-content">
			<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-4);">
				<h3 data-i18n="users.addUser">Add User</h3>
				<button id="closeAddUserModal" class="btn btn-secondary" style="padding: var(--space-1); min-width: auto;">
					<svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
						<path d="M6 18L18 6M6 6l12 12"/>
					</svg>
				</button>
			</div>
			<form id="addUserForm">
				<div>
					<label data-i18n="users.username">Username</label>
					<input type="text" id="addUserUsername" required autocomplete="username" data-placeholder="users.placeholderUsername" />
				</div>
				<div style="margin-top: var(--space-4);">
					<label data-i18n="users.password">Password</label>
					<input type="password" id="addUserPassword" required autocomplete="new-password" data-placeholder="users.placeholderNewPassword" />
				</div>
				<div style="margin-top: var(--space-4);">
					<label data-i18n="users.confirmPassword">Confirm Password</label>
					<input type="password" id="addUserConfirmPassword" required autocomplete="new-password" data-placeholder="users.placeholderConfirmPassword" />
				</div>
				<div style="margin-top: var(--space-4);">
					<label data-i18n="users.selectRole">Select Role</label>
					<select id="addUserRole" required style="width: 100%;">
						<option value="user" data-i18n="users.roleUser">User</option>
						<option value="admin" data-i18n="users.roleAdmin">Admin</option>
					</select>
				</div>
				<p id="addUserError" style="display:none; margin-top: var(--space-4); padding: var(--space-3); background: var(--color-danger-soft); color: var(--color-danger); border-radius: var(--radius-md); border: 1px solid var(--color-danger); font-size: var(--font-size-sm);"></p>
				<p id="addUserSuccess" style="display:none; margin-top: var(--space-4); padding: var(--space-3); background: var(--color-success-soft); color: var(--color-success); border-radius: var(--radius-md); border: 1px solid var(--color-success); font-size: var(--font-size-sm);"></p>
				<div class="actions" style="margin-top: var(--space-4);">
					<button type="submit" class="btn btn-primary">
						<svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
							<path d="M5 13l4 4L19 7"/>
						</svg>
						<span data-i18n="users.createUser">Create User</span>
					</button>
					<button type="button" id="cancelAddUserModal" class="btn btn-secondary">
						<span data-i18n="users.cancel">Cancel</span>
					</button>
				</div>
			</form>
		</div>
	</div>

	<script src="/i18n.js"></script>
	<script src="/layout.js"></script>
	<script src="/users.js"></script>
</body>
</html>

